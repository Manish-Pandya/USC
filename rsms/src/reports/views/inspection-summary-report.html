
<div class="dashboard report-detail">
    <div class="card full">
        <h1>
            <i class="title-icon icon-clipboard-2"></i>Laboratory Safety Inspection Summary Report ({{selection.year}})
        </h1>

        <hr/>

        <div ng-if="!data.Department" style="text-align: center; margin: 10px;">
            <i style="color:black;" class="spinner icon-spinnery-dealie large"></i>
        </div>
        <ul ng-if="data.Department">
            <li>
                <span class="title">Deptartment:</span>
                <span ng-bind="data.Department.Name"></span>
            </li>
            <li>
                <span class="title">Chair:</span>
                <span ng-bind="data.Department.Chair_name"></span>
            </li>
        </ul>
    </div>

    <div class="card full">
        <div ng-if="!data.ReportItems" style="text-align: center; margin: 10px;">
            <i style="color:black;" class="spinner icon-spinnery-dealie large"></i>
        </div>

        <table ng-if="data.ReportItems">
            <tr>
                <th ng-if="config.list_department" ng-click="reorder('Department_name');">
                    Department <i class="icon-arrow"></i>
                </th>
                <th ng-click="reorder('Principal_investigator_name');">
                    Principal Investigator <i class="icon-arrow"></i>
                </th>
                <th ng-click="reorder('Started_date');">
                    Inspection Date <i class="icon-arrow"></i>
                </th>
                <th ng-click="reorder('Inspection_status');">
                    Lab Inspection Status <i class="icon-arrow"></i>
                </th>
                <th ng-click="reorder('Score');">
                    Compliance Score <i class="icon-arrow"></i>
                </th>
                <th>Inspection Report</th>
            </tr>
            <tr ng-repeat="item in data.ReportItems | orderBy : config.orderByField : config.reverseSort">
                <td ng-if="config.list_department">{{item.Department_name}}</td>
                <td>{{item.Principal_investigator_name}}</td>
                <td>{{item.Started_date}}</td>
                <td>{{getStatusText(item)}}</td>
                <td>
                    <span ng-if="item.Items_inspected > 0">{{item.Score}}%</span>
                </td>
                <td>
                    <a ng-if="showInspectionLink(item)" target="_blank" href="../views/inspection/InspectionConfirmation.php#/report?inspection={{item.Inspection_id}}">Inspection Report</a>
                    <span ng-if="!showInspectionLink(item)">N/A</span>
                </td>
            </tr>
        </table>
    </div>
</div>