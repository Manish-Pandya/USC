<div cg-busy="{promise:pickupReadyContainersPromise,message:'Loading Waste Containers', backdrop:true,templateUrl:'views/busy-templates/full-page-busy.html'}"></div>
<div cg-busy="{promise:pickupsPromise,message:'Loading Pickups', backdrop:true,templateUrl:'views/busy-templates/full-page-busy.html'}"></div>

<div cg-busy="{promise:PickupSaving,message:'Saving Pickup', backdrop:true,templateUrl:'views/busy-templates/full-page-busy.html'}"></div>

<div cg-busy="{promise:ScintVialCollectionSaving,message:'Saving Pickup', backdrop:true,templateUrl:'views/busy-templates/full-page-busy.html'}"></div>
<div cg-busy="{promise:WasteBagSaving,message:'Saving Pickup', backdrop:true,templateUrl:'views/busy-templates/full-page-busy.html'}"></div>
<div cg-busy="{promise:CarboyUseCycleSaving,message:'Saving Pickup', backdrop:true,templateUrl:'views/busy-templates/full-page-busy.html'}"></div>
<div class="spacer" style="height:70px;"></div>

<div class="right-column">
    <ul class="nav nav-pills" style="margin:20px 0 0">
        <li ng-class="{'active':!pickupsFilter.showAll}"><a ng-click="pickupsFilter.showAll = false;">Current Pickups</a></li>
        <li ng-class="{'active':pickupsFilter.showAll}"><a ng-click="pickupsFilter.showAll = true;">All Pickups</a></li>
        <li style="display:block;"><input ng-model="piSearch" placeholder="Search By Pi" /></li>
    </ul>

    <div class="well super" ng-repeat="pickup_group in pickup_groups">
        <h1 class="card-header accordion-header">[Pickups {{pickup_group.label}} ({{pickup_group.pickups.length}})]</h1>
        <div class="card super pickups pickup-collection admin" ng-repeat="pickup in pickup_group.pickups | filter:{PiName:piSearch} track by $index">
            <h1 ng-class="{'no-underline':!pickup.show}" class="card-header accordion-header" ng-click="pickup.show = !pickup.show">
                <i class="icon-box-remove"></i>
                <span ng-if="pickup.Pickup_date">{{pickup.PiName}}'s lab had waste picked up {{pickup.Pickup_date | dateToISO}}</span>
                <span ng-if="!pickup.Pickup_date">{{pickup.PiName}}'s lab has waste ready to pick up.</span>
            </h1>

            <div ng-if="pickup.show" class="print-always pickup-form">
                <div>
                    <button ng-if="pickup_group.allowStart"    ng-click="editPickup(pickup, 'PICKED_UP')" class="btn btn-primary">Start Pickup</button>
                    <button ng-if="pickup_group.allowEdit"     ng-click="editPickup(pickup, 'PICKED_UP')" class="btn btn-warning">Edit Pickup</button>
                    <button ng-if="pickup_group.allowComplete" ng-click="editPickup(pickup, 'AT_RSO')" class="btn btn-danger">Finish Pickup</button>
                </div>

                <div ng-if="pickup_group.listIncludedContainers" >[List Included Containers]</div>
                <div ng-if="pickup_group.listAvailableContainers">
                    <span>[List Available Containers (PI: {{pickup.Principal_investigator_id}}) ({{pickupReadyContainersByPI[pickup.Principal_investigator_id].length}})]</span>
                    <div ng-repeat="container in pickupReadyContainersByPI[pickup.Principal_investigator_id]">
                        {{container.Label || container.CarboyNumber}}
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<!---->
