<div cg-busy="{promise:piAuthsPromise,message:'Loading', backdrop:true,templateUrl:'views/busy-templates/full-page-busy.html'}"></div>
<div class="auths well card" style="margin:0; padding:0; border:none; box-shadow:none">
    <h1><i class="icon-copy" style="page-break-after:avoid; page-break-before:avoid"></i>Print Authorization Report</h1>
    <div class="card full authReports" ng-if="piAuths.length" style="page-break-after:avoid; page-break-before:avoid">
        <div class="fake-table striped">
            <div class="table-header">
                <h3>Name<br /><input ng-model="filterObj.piName" /></h3>
                <h3>Department<br /><input ng-model="filterObj.department" /></h3>
                <h3>
                    <span class="span6" style="width:50%; margin-left:0">Building<br /><input ng-model="filterObj.building" /></span>
                    <span class="span6" style="width:50%; margin-left:0">Room<br /><input ng-model="filterObj.room" /></span>
                </h3>
                <h3>Auth #</h3>
            </div>
            <div class="table-row" ng-repeat="piAuth in piAuths | authsFilter:filterObj | orderBy: 'PiName'">
                <div>
                    {{piAuth.PiName}}
                </div>
                <div>
                    <ul>
                        <li ng-repeat="dept in piAuth.Departments">
                            {{dept.Name}}
                        </li>
                    </ul>

                </div>
                <div>
                    <ul class="selectedBuildings">
                        <li ng-repeat="(key, r) in piAuth.Rooms | groupBy: 'Building.Name'">
                            <div style="width:50%; margin-left:0" class="span3">
                                <h4>{{r[0].Building.Alias || r[0].Building.Name}}</h4>
                            </div>
                            <div class="roomsForBuidling span3" style="width:50%; margin-left:0">
                                <ul>
                                    <li ng-repeat="(key, room) in rooms = (r | activeOnly | orderBy: 'Name')">{{room.Name}}</li>
                                </ul>
                            </div>
                        </li>
                    </ul>
                </div>
                <div>
                    {{piAuth.Authorization_number}}
                </div>
            </div>
        </div>

    </div>
</div>

