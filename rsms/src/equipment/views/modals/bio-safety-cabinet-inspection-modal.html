<div class="modal-header" style="padding:0;">
    <h2 style="padding:5px; background:#428642; color:white">Certify Cabinet</h2>
</div>

<div class="modal-body inspections">
    <div class="control-group">
        <label class="control-label">Principal Investigator: <span ng-show="!modalData.piEdit">{{modalData.BioSafetyCabinetCopy.PrincipalInvestigator.User.Name}} <i class="primary icon-pencil" ng-click="modalData.piEdit = !modalData.piEdit"></i></span></label>
        <div class="controls span4" ng-show="modalData.piEdit">
            <ui-select ng-model="pi.selected" theme="selectize" ng-disabled="disabled" on-select="onSelectPi($item)" >
                <ui-select-match placeholder="Select or search for a PI">{{$select.selected.User.Name}}</ui-select-match>
                <ui-select-choices repeat="pi in PIs | orderBy:'User.Name' |propsFilter: {User.Name: $select.search}">
                  <div ng-bind-html="pi.User.Name | highlight: $select.search"></div>
                </ui-select-choices>
            </ui-select> 
            <i style="margin:5px" ng-click="modalData.piEdit = !modalData.piEdit" class="icon-cancel danger"></i>
        </div>
    </div>
    <div class="control-group">
        <label class="control-label">Building: <span ng-show="!modalData.buildingEdit">{{modalData.selectedBuilding}} <i class="primary icon-pencil" ng-click="modalData.buildingEdit = !modalData.buildingEdit"></i></span></label>
        <div class="controls" ng-show="modalData.buildingEdit">
            <select ng-init="getBuilding()" ng-model="modalData.selectedBuilding" ng-change="onSelectBuilding()" ng-options="building as building for building in modalData.BioSafetyCabinetCopy.PrincipalInvestigator.Buildings">
                <option value="">--Select Building--</option>
            </select>
            <i ng-click="modalData.buildingEdit = !modalData.buildingEdit" class="icon-cancel danger"></i>
        </div>
    </div>    
        
    <span ng-if="modalData.BioSafetyCabinetCopy.PrincipalInvestigator.Rooms" ng-init="modalData.BioSafetyCabinetCopy.PrincipalInvestigator.loadBuildings()"/>
    <div class="control-group">
        <label class="control-label">Room: <span ng-show="!modalData.roomEdit">{{modalData.BioSafetyCabinetCopy.Room.Name}} <i class="primary icon-pencil" ng-click="modalData.roomEdit = !modalData.roomEdit"></i></span></label>
        <div class="controls" ng-show="modalData.roomEdit">
            <select ng-model="modalData.BioSafetyCabinetCopy.Room" ng-change="onSelectRoom()" ng-options="room as room.Name for room in modalData.BioSafetyCabinetCopy.PrincipalInvestigator.Rooms | matchBuilding:modalData.selectedBuilding">
                <option value="">--Select Room--</option>
            </select>
            <i ng-click="modalData.roomEdit = !modalData.roomEdit" class="icon-cancel danger"></i>
        </div>
    </div>
    
    <div class="control-group">
        <label class="control-label">Certification Frequency: <span ng-show="!modalData.freqEdit">{{modalData.BioSafetyCabinetCopy.Frequency}} <i class="primary icon-pencil" ng-click="modalData.freqEdit = !modalData.roomEdit"></i></span></label>
        <div class="controls" ng-show="modalData.freqEdit">
            <select ng-model="modalData.BioSafetyCabinetCopy.Frequency" ng-options="frequency as frequency for (key,frequency) in Constants.BIOSAFETY_CABINET.FREQUENCY">
                <option value="">--Select--</option>
            </select>
            <i ng-click="modalData.freqEdit = !modalData.freqEdit" class="icon-cancel danger"></i>
        </div>
    </div>
    
    
    <div class="control-group">
        <label class="control-label">Type:  <span>{{modalData.BioSafetyCabinetCopy.Type}}</span></label>
    </div>
    <div class="control-group">
        <label class="control-label">SERIAL #: <span>{{modalData.BioSafetyCabinetCopy.Serial_number}}</span></label>
    </div>
    <div class="control-group">
        <label class="control-label">Make: <span>{{modalData.BioSafetyCabinetCopy.Make}}</span></label>
    </div>
    <div class="control-group">
        <label class="control-label">Model: <span>{{modalData.BioSafetyCabinetCopy.Model}}</span></label>
    </div>
    <div class="control-group">
        <label class="control-label">Certification Date</label>
        <datepicker2 ng-model='modalData.BioSafetyCabinetCopy.viewDate' disable-timepicker='true' date-filter='todayOrAfter'></datepicker2>
    </div>
    <div class="control-group">
        <label>Report Document</label>
        <a class="btn btn-large btn-success left view-report" ng-if="modalData.BioSafetyCabinetCopy.EquipmentInspections[modalData.inspectionIndex].Report_path" href="protocol-documents/{{modalData.BioSafetyCabinetCopy.EquipmentInspections[modalData.inspectionIndex].Report_path}}" target="_blank"><strong><i class="icon-paper-2"></i>View</strong></a>
        <input type="file" name="file" id="file" class="inputfile inputfile-1" file-upload/>
        <label for="file" ng-class="{'success':!modalData.BioSafetyCabinetCopy.EquipmentInspections[modalData.inspectionIndex].Report_path,'danger':modalData.BioSafetyCabinetCopy.EquipmentInspections[modalData.inspectionIndex].Report_path}">
            <strong><i class="icon-upload-4"></i><span ng-if="!modalData.BioSafetyCabinetCopy.EquipmentInspections[modalData.inspectionIndex].Report_path">Upload</span><span ng-if="modalData.BioSafetyCabinetCopy.EquipmentInspections[modalData.inspectionIndex].Report_path">Replace</span></strong>
        </label>
        <i class="success icon-checkmark upload-icon" ng-if="modalData.BioSafetyCabinetCopy.reportUploaded"></i><i class="icon-spinnery-dealie spinner upload-icon" ng-if="modalData.BioSafetyCabinetCopy.reportUploading"></i>
    </div>
    
</div>

<div class="modal-footer">
    <button class="btn btn-large btn-success left" ng-click="certify(modalData.BioSafetyCabinetCopy.EquipmentInspections[modalData.inspectionIndex], modalData.BioSafetyCabinet.EquipmentInspections[modalData.inspectionIndex])"><i class="icon-checkmark"></i>Certify</button>
    <a class="btn btn-large left" ng-click="close()"><i class="icon-cancel-2"></i>Close</a>
    <br /><span class="red bold" style="margin: 5px 91px;font-size: 15px;display: inline-block;">{{message}}</span>
</div>
