<div cg-busy="{promise:InspectionPromise,message:'Loading Inspection', backdrop:true,templateUrl:'views/busy-templates/full-page-busy.html'}"></div>
<div cg-busy="{promise:InspectionWipeSaving,message:'Saving Wipe', backdrop:true,templateUrl:'views/busy-templates/full-page-busy.html'}"></div>
<div cg-busy="{promise:InspectionWipeTestSaving,message:'Creating Wipe Test', backdrop:true,templateUrl:'views/busy-templates/full-page-busy.html'}"></div>

<div>
	<div class="card super wipes">
		<h3 class="card-header padding">
			<span ng-if="!inspection.Inspection_wipe_tests[0].Inspection_wipes.length">
				No Wipes yet for this inspection.
			</span>
			<span ng-if="inspection.Inspection_wipe_tests[0].Inspection_wipes.length">Wipes</span>
			<a ng-click="editInspectionWipe(inspection.Inspection_wipe_tests[0], null, inspection)" class="left btn btn-success"><i class="icon-plus-2"></i>Add</a>
		</h3>
		<div class="fake-table inspection-wipe-table" ng-if="inspection.Inspection_wipe_tests[0].Inspection_wipes.length">
			<div class="table-header">
				<h3>Edit</h3>
				<h3>Room</h3>
				<h3>Location</h3>
				<h3>Notes</h3>
				<h3>Radioactivity</h3>
				<h3>Test Type</h3>
				<h3></h3>
			</div>
			<div class="table-row" ng-class="{'edit':smear.edit}" ng-repeat="smear in inspection.Inspection_wipe_tests[0].Inspection_wipes">
				<div>
					<button ng-disabled="smear.edit" class="btn btn-primary left" ng-click="editInspectionWipe(inspection.Inspection_wipe_tests[0], smear)"><i class="icon-pencil"></i>Edit</button>
				</div>

				<div ng-if="!smear.edit">
					{{smear.Room.Name}}
				</div>
				<div ng-if="smear.edit">
					<select style="width:60px" ng-model="InspectionWipeCopy.Room_id">
						<option ng-repeat="room in inspection.Rooms" value="{{room.Key_id}}">{{room.Name}}</option>
					</select>
				</div>

				<div ng-if="!smear.edit">
					{{smear.Location}}
				</div>
				<div ng-if="smear.edit">
					<textarea ng-model="InspectionWipeCopy.Location" placeholder="Location"></textarea>
				</div>

				<div ng-if="!smear.edit">
					{{smear.Notes}}
				</div>
				<div ng-if="smear.edit">
					<textarea ng-model="InspectionWipeCopy.Notes"></textarea>
				</div>

				<div ng-if="!smear.edit">
					{{smear.Curie_level}} mCi
				</div>
				<div ng-if="smear.edit">
					<div class="control-group">
					     <div class="controls input-append">
							<input style="width:40px" ng-model="InspectionWipeCopy.Curie_level">
							<span class="add-on">mCi</span>
						</div>
					</div>
				</div>

				<div ng-if="!smear.edit">
					{{smear.Reading_type}}
				</div>
				<div ng-if="smear.edit">
					<select ng-model="InspectionWipeCopy.Reading_type" style="width:100px">
						<option selected="selected">Select Reading Type</option>
						<option value="LSC">LSC</option>
						<option value="Alpha/Beta">Alpha/Beta</option>
						<option value="MCA">MCA</option>
					</select>
				</div>

				<div>
					<span ng-if="smear.edit">
						<a class="btn btn-success left" ng-click="af.saveInspectionWipe(InspectionWipeCopy, smear,inspection.Inspection_wipe_tests[0])"><i class="icon-checkmark"></i>Save</a>
						<a class="btn btn-danger left" ng-click="cancelInspectionWipeEdit(smear,inspection.Inspection_wipe_tests[0])"><i class="icon-cancel-2"></i>Cancel</a>
					</span>
				</div>
			</div>
		</div>
	</div>
</div>